<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>查看活動</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      padding: 20px;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background-color: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }
    img { max-width: 100%; height: auto; }
    .title-row {
      text-align: center;
      align-items: center;
      gap: 16px;
      margin-bottom: 20px;
    }
    .activity-info {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }
    .activity-info div {
      padding: 15px;
      background-color: #f9f9f9;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }
    .activity-info h3 { color: #2c4975; margin-bottom: 10px; }
    .activity-info p { color: #333; }
    .button-container {
      display: flex;
      gap: 10px;
      justify-content: flex-start;
    }
    .button {
      display: block;
      width: 100%;
      padding: 12px;
      margin-top: 20px;
      background-color: #81D3E1;
      color: white;
      text-align: center;
      text-decoration: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .button:hover { background-color: #2c4975; }
    @media (max-width: 768px) {
      .activity-info { grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="title-row">
      <h1 id="activity-title">載入中...</h1>
    </div>    

    <div class="activity-info">
      <div>
        <h3>運動類型</h3>
        <p id="sport_type_id">載入中...</p>
      </div>
      <div>
        <h3>主辦人</h3>
        <p id="name">載入中...</p>
      </div>
      <div>
        <h3>活動時間</h3>
        <p id="activityTime">載入中...</p>
      </div>
      <div>
        <h3>活動地點</h3>
        <p id="location">載入中...</p>
      </div>
      <div>
        <h3>參與人數</h3>
        <p id="numPeople">載入中...</p>
      </div>
    </div>

    <div class="button-container">
      <a href="#" class="button">我再考慮考慮！</a>
      <a href="#" class="button">立即報名！</a>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const params = new URLSearchParams(window.location.search);
      const activityId = params.get('id'); // URL 中的 id
    
      if (!activityId) {
        alert("⚠️ 無活動 ID，請重新操作。");
        return;
      }
    
      // 抓特定活動資料
      fetch(`http://localhost:5002/api/activities/${activityId}`)
        .then(response => {
          if (!response.ok) throw new Error('後端活動資料錯誤');
          return response.json();
        })
        .then(activityData => {
          console.log('活動資料:', activityData);
    
          // 更新畫面文字
          document.getElementById('activity-title').textContent = activityData.title ?? '未提供標題';
          document.getElementById('activityTime').textContent = `活動時間：${activityData.time ?? '未提供'}`;
          document.getElementById('location').textContent = `活動地點：${activityData.location ?? '未提供'}`;
          document.getElementById('numPeople').textContent = `目前人數：${activityData.current_people ?? 0}/${activityData.max_people ?? '?'}`;
          document.getElementById('name').textContent = activityData.host_name ?? '未提供';
    
          // 接著查詢運動類型
          const sportTypeId = activityData.sport_type_id;
          return fetch(`http://localhost:5002/api/sport-types/${sportTypeId}`);
        })
        .then(response => {
          if (!response.ok) throw new Error('運動類型資料錯誤');
          return response.json();
        })
        .then(sportTypeData => {
          console.log('運動類型資料:', sportTypeData);
          document.getElementById('sport_type_id').textContent = sportTypeData.name ?? '未知類型';
        })
        .catch(error => {
          console.error('❌ 資料取得失敗:', error);
        });
    });
    </script>
    
    
    

</body>
</html>